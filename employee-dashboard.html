<!DOCTYPE html>
<html lang="en">
<head>
    <title>Employee Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="dashboard-style.css" rel="stylesheet">
</head>
<body>
    <div class="twocolorish1">
        <ul></ul>
    </div>
    <div class="twocolorish">
        <ul>
            <li id="title">TRMS</li>
            <li style="float:right"><a href="http://127.0.0.1:5500/employee-dashboard.html">Welcome <span id="result-empName"></span></a></li>
          </ul>
        </div>
    <!-- Side navigation -->
<div class="sidenav">
    
    
    <a href="http://127.0.0.1:5500/reimb-form.html">Reimbursement Form</a>
    <a href="http://127.0.0.1:5500/form-status.html">Form Status</a>
    <a href="http://127.0.0.1:5500/action-required.html">Actions Required</a>
    <a href="http://127.0.0.1:5500/login-page.html">Logout</a>
  </div>

  <!-- Page content -->
 <div id="dashboard-title">The Tuition Reimbursement Management System</div>

  <div class="main">
    <h3>Dashboard</h3>
    <h6>Ph #: <span id="result-phNumber"></span></h6>
    <h4>Department No. : <span id="result-deptId"></span></h4>
    <h4>Department Name: <span id="result-deptName"></span></h4>
    <h4>Head of Department: <span id="result-deptHead"></span></h4>
    <h4>Supervisor: <span id="result-supervisor"></span></h4>
    </div>

</body>

<script>
    window.addEventListener('load', () => {
        const empName = localStorage.getItem('empName');
        const deptId = localStorage.getItem('deptId');
        const deptName = localStorage.getItem('deptName');
        const deptHeadId = localStorage.getItem('deptHeadId');
        const supervisor = localStorage.getItem('supervisor');

        getDeptHeadInfo(deptHeadId);

        document.getElementById("result-empName").innerHTML = empName + "!!";
        document.getElementById("result-phNumber").innerHTML = "(123)-456-789";
        document.getElementById("result-deptId").innerHTML = deptId;
        document.getElementById("result-deptName").innerHTML = deptName;
        document.getElementById("result-supervisor").innerHTML = supervisor;
    })

    async function getDeptHeadInfo(deptHeadId){
        let id = deptHeadId;
        const url = "http://localhost:7000/employee/" + id;

        const httpResponse = await fetch(url);
        const body = await httpResponse.json();
        document.getElementById("result-deptHead").innerHTML = body.empName;
}

</script>
</html>